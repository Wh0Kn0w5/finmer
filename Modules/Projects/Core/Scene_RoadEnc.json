{
	"!Type": "AssetScene",
	"ID": "0a1575cb-f99e-4ca1-9558-dffbdfcb1c28",
	"Name": "Scene_RoadEnc",
	"ScriptCustom": {
		"ID": "92554a09-e797-4015-91a2-2283ac57c057",
		"Name": "Scene_RoadEnc_CustomScript"
	},
	"ScriptEnter": {
		"ID": "345170f4-d484-464c-b2b3-bd4153fd841b",
		"Name": "Scene_RoadEnc_OnEnter"
	},
	"ScriptLeave": {
		"ID": "a57ec2c6-d15f-48bd-a1dd-09a05cfeaa30",
		"Name": "0a1575cb-f99e-4ca1-9558-dffbdfcb1c28_LeaveScript"
	},
	"IsPatch": false,
	"Root": {
		"Key": "Root",
		"IsState": false,
		"IsLink": false,
		"Title": "Root",
		"Highlight": false,
		"ButtonWidth": 1.0,
		"Children": [
			{
				"Key": "ENC_MQ02Ambush",
				"IsState": true,
				"IsLink": false,
				"ScriptAction": "SaveData.TakeCheckpoint()\r\nStorage.SetFlag(\"mq02_road_antag_scheduled\", false)\r\nStorage.SetFlag(\"mq02_ambushed\", true)\r\nrandall = Creature(\"CR_MQ02_Randall\")\r\ngoon1 = Creature(\"CR_MQ02_Goon1\")\r\ngoon2 = Creature(\"CR_MQ02_Goon2\")\r\nLog(\"MQ02_AM_OPENING\")\r\nPreySense(randall, EVoreStyle.OV, true)",
				"ScriptAppear": "return Storage.GetFlag(\"mq02_road_antag_scheduled\")",
				"Children": [
					{
						"Key": "MQ02A_C_Opening",
						"IsState": false,
						"IsLink": false,
						"Title": "Continue",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"Children": [
							{
								"Key": "MQ02A_R_Opening",
								"IsState": true,
								"IsLink": false,
								"ScriptAction": "Log(\"MQ02_AM_OPENING2\")",
								"Children": [
									{
										"Key": "MQ02A_C_HelloNice",
										"IsState": false,
										"IsLink": false,
										"Title": "Honest",
										"Tooltip": "Tell him who you are.",
										"Highlight": false,
										"ButtonWidth": 1.0,
										"Children": [
											{
												"Key": "MQ02A_R_HelloNice",
												"IsState": true,
												"IsLink": false,
												"ScriptAction": "Log(\"MQ02_AM_HELLO_NICE\")\r\nStorage.ModifyNumber(\"rep_randall\", -1)",
												"Children": [
													{
														"Key": "MQ02A_C_Business",
														"IsState": false,
														"IsLink": false,
														"Title": "Continue",
														"Highlight": false,
														"ButtonWidth": 1.0,
														"Children": [
															{
																"Key": "MQ02A_R_Business",
																"IsState": true,
																"IsLink": false,
																"ScriptAction": "Log(\"MQ02_AM_BUSINESS\")",
																"Children": [
																	{
																		"Key": "MQ02A_C_Business2",
																		"IsState": false,
																		"IsLink": false,
																		"Title": "Continue",
																		"Highlight": false,
																		"ButtonWidth": 1.0,
																		"Children": [
																			{
																				"Key": "MQ02A_R_Business2Ate",
																				"IsState": true,
																				"IsLink": false,
																				"ScriptAction": "Log(\"MQ02_AM_BUSINESS2_ATEOLIVER\")",
																				"ScriptAppear": "return Storage.GetFlag(\"oliver_eaten\")",
																				"Children": [
																					{
																						"IsState": false,
																						"IsLink": true,
																						"LinkTarget": "MQ02A_C_Ending"
																					}
																				]
																			},
																			{
																				"Key": "MQ02A_R_Business2",
																				"IsState": true,
																				"IsLink": false,
																				"ScriptAction": "Log(\"MQ02_AM_BUSINESS2\")",
																				"Children": [
																					{
																						"Key": "MQ02A_C_Ending",
																						"IsState": false,
																						"IsLink": false,
																						"Title": "Continue",
																						"Highlight": false,
																						"ButtonWidth": 1.0,
																						"Children": [
																							{
																								"Key": "MQ02A_R_Ending",
																								"IsState": true,
																								"IsLink": false,
																								"ScriptAction": "Log(\"MQ02_AM_ENDING\")",
																								"Children": [
																									{
																										"Key": "MQ02A_C_Finish",
																										"IsState": false,
																										"IsLink": false,
																										"Title": "Continue",
																										"Highlight": false,
																										"ButtonWidth": 1.0,
																										"Children": [
																											{
																												"Key": "MQ02A_R_Finish",
																												"IsState": true,
																												"IsLink": false,
																												"ScriptAction": "Log(\"MQ02_AM_FINISH\")\r\nJournal.Update(\"MQ02\", Storage.GetFlag(\"oliver_dead\") and 21 or 20)\r\n\r\nif not Storage.GetFlag(\"MQ02_RANDALL_FOUGHT\") then\r\n    Player:AwardXP(RewardXP.MQ02_EncNoViolence)\r\nend",
																												"Children": [
																													{
																														"IsState": false,
																														"IsLink": true,
																														"LinkTarget": "GoNextEncounter"
																													}
																												]
																											}
																										]
																									}
																								]
																							}
																						]
																					}
																				]
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									},
									{
										"Key": "MQ02A_C_HelloNotNice",
										"IsState": false,
										"IsLink": false,
										"Title": "Reserved",
										"Tooltip": "Who's asking?",
										"Highlight": false,
										"ButtonWidth": 1.0,
										"Children": [
											{
												"Key": "MQ02A_R_HelloNotNice",
												"IsState": true,
												"IsLink": false,
												"ScriptAction": "Log(\"MQ02_AM_HELLO_NOT_NICE\")",
												"Children": [
													{
														"IsState": false,
														"IsLink": true,
														"LinkTarget": "MQ02A_C_Business"
													}
												]
											}
										]
									},
									{
										"Key": "MQ02A_C_HelloAccuse",
										"IsState": false,
										"IsLink": false,
										"Title": "Accusatory",
										"Tooltip": "This guy is who Oliver warned you about. Ask him about his prey.",
										"Highlight": true,
										"ButtonWidth": 1.0,
										"ScriptAppear": "-- did Oliver warn the player about Randall?\r\nreturn Storage.GetFlag(\"MQ02_OLIVER_R_SPILL_WOLF\")",
										"Children": [
											{
												"Key": "MQ02A_R_HelloAccuse",
												"IsState": true,
												"IsLink": false,
												"ScriptAction": "Log(\"MQ02_AM_HELLO_REALLY_NOT_NICE\")\r\nStorage.ModifyNumber(\"rep_randall\", 1)",
												"Children": [
													{
														"Key": "MQ02A_C_HelloPush",
														"IsState": false,
														"IsLink": false,
														"Title": "Push",
														"Tooltip": "Give him a good shove. Back off, punk.",
														"Highlight": false,
														"ButtonWidth": 1.0,
														"Children": [
															{
																"Key": "MQ02A_R_HelloPush",
																"IsState": true,
																"IsLink": false,
																"ScriptAction": "Log(\"MQ02_AM_HELLO_SHOVE\")",
																"Children": [
																	{
																		"IsState": false,
																		"IsLink": true,
																		"LinkTarget": "MQ02A_C_Business"
																	}
																]
															}
														]
													},
													{
														"Key": "MQ02A_C_HelloLick",
														"IsState": false,
														"IsLink": false,
														"Title": "Lick",
														"Tooltip": "Lick his muzzle. Probably not what he expects.",
														"Highlight": false,
														"ButtonWidth": 1.0,
														"Children": [
															{
																"Key": "MQ02A_R_HelloLick",
																"IsState": true,
																"IsLink": false,
																"ScriptAction": "Log(\"MQ02_AM_HELLO_LICK\")",
																"Children": [
																	{
																		"IsState": false,
																		"IsLink": true,
																		"LinkTarget": "MQ02A_C_Business"
																	},
																	{
																		"Key": "MQ02A_C_Bellyrub",
																		"IsState": false,
																		"IsLink": false,
																		"Title": "Bellyrub",
																		"Tooltip": "Tease him further with a rub on that fuzzy gut.",
																		"Highlight": false,
																		"ButtonWidth": 1.0,
																		"Children": [
																			{
																				"Key": "MQ02A_R_Bellyrub",
																				"IsState": true,
																				"IsLink": false,
																				"ScriptAction": "Log(\"MQ02_AM_BELLYRUB\")",
																				"Children": [
																					{
																						"Key": "MQ02A_C_WillingVore",
																						"IsState": false,
																						"IsLink": false,
																						"Title": "Submit",
																						"Tooltip": "Let the wolf swallow you, like the tasty preything you are.",
																						"Highlight": false,
																						"ButtonWidth": 1.0,
																						"ScriptAction": "-- Player gets gulped by Randall\r\nLog(\"MQ02_RANDALL_VORE_WIN_POV\")\r\nlocal fight = Combat2()\r\nfight:AddParticipant(Player)\r\nfight:AddParticipant(randall)\r\nfight:SetVored(randall, Player)\r\nfight:Begin()",
																						"Children": [
																							{
																								"Key": "MQ02A_R_Dummy1",
																								"IsState": true,
																								"IsLink": false,
																								"ScriptAction": "-- you're not supposed to be able to win the willing vore fight\r\nerror()",
																								"Children": []
																							}
																						]
																					}
																				]
																			}
																		]
																	}
																]
															}
														]
													},
													{
														"Key": "MQ02A_C_HelloPunch",
														"IsState": false,
														"IsLink": false,
														"Title": "Punch",
														"Tooltip": "Your knuckles are itching. Use them.",
														"Highlight": false,
														"ButtonWidth": 1.0,
														"Children": [
															{
																"Key": "MQ02A_R_HelloPunch",
																"IsState": true,
																"IsLink": false,
																"ScriptAction": "Log(\"MQ02_AM_HELLO_PUNCH\")\r\nStorage.ModifyNumber(\"rep_randall\", -2)",
																"Children": [
																	{
																		"IsState": false,
																		"IsLink": true,
																		"LinkTarget": "MQ02A_BeginFight"
																	}
																]
															}
														]
													},
													{
														"IsState": false,
														"IsLink": true,
														"LinkTarget": "MQ02A_C_Stab"
													}
												]
											}
										]
									},
									{
										"Key": "MQ02A_C_Stab",
										"IsState": false,
										"IsLink": false,
										"Title": "Stab",
										"Tooltip": "Quickly try to stab him with your light weapon.",
										"Highlight": true,
										"ButtonWidth": 1.0,
										"ScriptAppear": "local ty = Player.EquippedWeapon\r\nreturn ty ~= nil and ty.WeaponType == WeaponType.LIGHT",
										"Children": [
											{
												"Key": "MQ02A_R_Stab",
												"IsState": true,
												"IsLink": false,
												"ScriptAction": "Text.SetVariable(\"weapon\", Player.EquippedWeapon.Alias)\r\nLog(\"MQ02_AM_HELLO_STAB\")\r\n\r\n-- He'll remember that\r\nStorage.SetFlag(\"MQ02_RANDALL_STABBED\", true)\r\nStorage.ModifyNumber(\"rep_randall\", -3)\r\n\r\n-- Reflect the stab in the upcoming fight\r\nrandall.Health = randall.Health * 0.5",
												"Children": [
													{
														"Key": "MQ02A_BeginFight",
														"IsState": false,
														"IsLink": false,
														"Title": "Let's roll",
														"Highlight": false,
														"ButtonWidth": 1.0,
														"ScriptAction": "-- Player fights Randall and two goons\r\nStorage.SetFlag(\"MQ02_RANDALL_FOUGHT\", true)\r\nlocal fight = Combat2()\r\nfight:AddParticipant(Player)\r\nfight:AddParticipant(randall)\r\nfight:AddParticipant(goon1)\r\nfight:AddParticipant(goon2)\r\nfight:OnCreatureVored(function(predator, prey)\r\n    if predator == Player then\r\n        Storage.SetFlag(\"MQ02_RANDALL_GOON_EATEN\", true)\r\n    end\r\nend)\r\nfight:Begin()",
														"Children": [
															{
																"Key": "MQ02A_WinFight",
																"IsState": true,
																"IsLink": false,
																"ScriptAction": "if Storage.GetFlag(\"MQ02_RANDALL_GOON_EATEN\") then\r\n    -- Alternate text if either of the goons are eaten\r\n    Log(\"MQ02_AM_WINFIGHT_NOBACKUP\")\r\nelse\r\n    Log(\"MQ02_AM_WINFIGHT\")\r\nend",
																"Children": [
																	{
																		"Key": "MQ02A_C_WinChase",
																		"IsState": false,
																		"IsLink": false,
																		"Title": "Continue",
																		"Highlight": false,
																		"ButtonWidth": 1.0,
																		"Children": [
																			{
																				"Key": "MQ02A_R_WinChase",
																				"IsState": true,
																				"IsLink": false,
																				"ScriptAction": "Log(\"MQ02_AM_WINFIGHT_LETGO\")",
																				"Children": [
																					{
																						"IsState": false,
																						"IsLink": true,
																						"LinkTarget": "MQ02A_C_Finish"
																					}
																				]
																			}
																		]
																	}
																]
															}
														]
													}
												]
											}
										]
									}
								]
							}
						]
					}
				]
			},
			{
				"Key": "ENC_None",
				"IsState": true,
				"IsLink": false,
				"ScriptAction": "Log(\"ROAD_NO_ENC\")",
				"Children": [
					{
						"Key": "GoNextEncounter",
						"IsState": false,
						"IsLink": false,
						"Title": "Move on",
						"Highlight": false,
						"ButtonWidth": 1.0,
						"ScriptAction": "ContinueRoadTravel()",
						"Children": []
					}
				]
			}
		]
	}
}